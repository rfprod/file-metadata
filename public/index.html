<!DOCTYPE html>
<html>
  <head>
    <title>File Metadata Microservice</title>
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <link href="/public/css/bootstrap.min.css" rel="stylesheet">
    <script src="/public/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <h3>File Metadata Microservice <a class="btn btn-primary btn-info" href="https://github.com/rfprod/file-metadata" target=_blank>GitHub Repo</a></h3>
      <div class="panel panel-default">
        <div class="panel-heading">File Metadata Microservice description</div>
        <div class="panel-body">
          <ul>
            <li>User can submit a FormData object that includes a file upload:
                <form action="/filepost/" class="form-inline" id="form" method="POST" target="test" enctype="multipart/form-data">
                  <fieldset class="form-group">
                    <hr/>
                    <div class="form-group">
                      <input type="file" class="form-control-file" name="file"/>
                    </div>
                    <div class="form-group">
                      <input type="submit" class="form-control btn-success" value="Submit"/>
                    </div>
                    <input type="reset" class="form-control btn-danger" id="reset" value="Reset"/>
                    <hr/>
                  </fieldset>
                </form>
            </li>
            <li>When user submits something, server returns the file size in bytes within the JSON response:
              <ul>
                <li><code>[{"when":"2016-01-28 18:53","size":"3","name":"fl-upl.test"}]</code></li>
              </ul>
            </li>
            <li>User can browse recent queries like this:
              <ul>
                <li><a href="https://file-metadata-microservice-rfprod.c9users.io/queries/" target="test">https://file-metadata-microservice-rfprod.c9users.io/queries/</a> <a href="https://file-metadata-microservice-rfprod.c9users.io/queries/" target=_blank><span class="glyphicon glyphicon-new-window"></span></a></li>
              </ul>
            </li>
            <li>User can clear stored queries data like this:
              <ul>
                <li><a href="https://file-metadata-microservice-rfprod.c9users.io/cleardata/" target="test">https://file-metadata-microservice-rfprod.c9users.io/cleardata/</a> <a href="https://file-metadata-microservice-rfprod.c9users.io/cleardata/" target=_blank><span class="glyphicon glyphicon-new-window"></span></a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <iframe name="test" onload="resizeIframe(this);" src="#" style="width:100%;border:0;"></iframe>
      <script>
        function resizeIframe(obj) {
          obj.style.height = '0px';
          obj.style.height = (obj.contentWindow.document.body.scrollHeight+20) + 'px';
        }
        $(document).ready(function(){
          $("#form").find("#reset").click(function clearForm(){
    				$(this).parent().parent().find('input[name="file"]').val("");
    				return false;
    			});
        });
      </script>
    </div>
  </body>
</html>